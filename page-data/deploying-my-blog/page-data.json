{"componentChunkName":"component---src-templates-blog-post-js","path":"/deploying-my-blog/","result":{"data":{"site":{"siteMetadata":{"title":"Techie Thoughts"}},"markdownRemark":{"id":"3fda2671-a643-5091-9b34-dd45a2d31d23","excerpt":"Why and how I’ve always been interested in improving my knowledge. I usually try to accomplish that following talks, discussing  opinions with friends and…","html":"<h2>Why and how</h2>\n<p>I’ve always been interested in improving my knowledge. I usually try to accomplish that following talks, discussing  opinions with friends and colleagues or reading stuff on the net.</p>\n<p>In the last few months often happened, during those situations or simply while working, to think something like “Hey man! You shouldn’t forget this! It would be cool even to share this with someone that could give you another point of view.”</p>\n<p>We can always share with people directly or through Social Networks but it’s not so easy to consult again very old things. And of course we have our brain to store info but mine is not the most reliable.</p>\n<p>Honestly I was looking also for something to improve my writing.\nSo what about a blog?</p>\n<h4>Gatsby</h4>\n<p>I set some requirement for choosing the right tools:</p>\n<ul>\n<li>Minimal and ready to use;</li>\n<li>Customisable without too much effort;</li>\n<li>Easy deployable (and for free?)</li>\n</ul>\n<p>After some research and comparison with others similar tools I found Gatsby!</p>\n<p>According to the official website Gatsby is “A full-stack frontend framework that comes with everything you need out of the box.”\nOne of the major points for me was that it’s based on ReactJs which I already had some minimal experience with.\nAnother important point was the existence of ready to use templates for building simple blogs.</p>\n<h4>Perfect then! And What about Deploy?</h4>\n<p>My idea was to reuse my existing custom domain (used for my personal website <a href=\"https://mircoporetti.me\">https://mircoporetti.me</a>) and to make the blog accessible under the subpath/blog.</p>\n<p>Since the website mentioned above was already deployed using Github Pages, the most natural choice was doing the same for the Gatsby app.\nAs I will describe in the next section, it was really easy to do that.</p>\n<h2>Installation</h2>\n<h4>Install Nodejs, npm and Gatsby CLI</h4>\n<p>Install Node and npm from <a href=\"https://nodejs.org/en/download/\">https://nodejs.org/en/download/</a>.</p>\n<p>then</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> gatsby-cli</code></pre></div>\n<h4>Create the application</h4>\n<p>For this project I used a very simple blog template called  “gatsby-starter-blog”.\nSource and info here <a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">https://github.com/gatsbyjs/gatsby-starter-blog</a>.</p>\n<p>Create the app executing</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby new blog-name https://github.com/gatsbyjs/gatsby-starter-blog</code></pre></div>\n<p>and run it</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">cd</span> blog-name/\ngatsby develop</code></pre></div>\n<p>Looked easy! :)</p>\n<h2>Deploy</h2>\n<p>In order to reach the website under domain/blog, Github Pages requires that the Github repository is created with the same name of the subpath, in my case it was “blog”.</p>\n<p>To do that, go to the “Repositories” section on Github, click on “New” and create a public repo called “blog”.</p>\n<h4>Gatsby configuration</h4>\n<p>Add Github Pages dependency:\nnpm install gh-pages —save-dev</p>\n<p>Add the following script into the package.json:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build --prefix-paths &amp;&amp; gh-pages -d public\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>“deploy”: “gatsby build —prefix-paths &#x26;&#x26; gh-pages -d public”</p>\n<p>After committing and pushing the changes to the main branch, create another branch called “gh-pages” and push it too.\nGo to the Github repository’s settings through Settings->Pages and set the gh-pages branch as source.</p>\n<p>NOTE: The custom domain doesn’t need to be set here since our page will be automatically published as a subpage of  the domain of the repository deployed under the root / using the repo name “yourGithubName.github.io”.\nIf the main app has a custom domain configured, the blog app will be under “customDomain/blog”, in my case “mircoporetti.me/blog”.</p>\n<p>Edit gatsby-config.js file and add the following line into “module.exports”:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token literal-property property\">pathPrefix</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/blog\"</span></code></pre></div>\n<p>If you receive an error about parallel queries, add even:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token literal-property property\">flags</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">PARALLEL_QUERY_RUNNING</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Do it! Now!</h4>\n<p>To run the deploy script type:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> run deploy</code></pre></div>\n<p>That’s it!</p>","frontmatter":{"title":"Deploying my blog using Gatsby and Github Pages","date":"May 15, 2022","description":"Why and How I built my first blog with Gatsby and deployed it on Github Pages"}},"previous":null,"next":{"fields":{"slug":"/tdd/"},"frontmatter":{"title":"TDD Who?"}}},"pageContext":{"id":"3fda2671-a643-5091-9b34-dd45a2d31d23","previousPostId":null,"nextPostId":"85646d61-c23e-541a-b723-5a1c380d0508"}},"staticQueryHashes":["2841359383","3257411868"]}